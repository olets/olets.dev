{% from "Card.njk" import Card %}
{% from "Text.njk" import Text %}

<div>
  <ol reversed class="gap-6 grid grid-cols-12 mt-8" style="counter-reset: start-from {{ (postslistCounter or postslist.length) + 1 }}">
    {% for post in postslist | reverse %}
      <li class="col-span-full lg:col-span-4 sm:col-span-6 xl:col-span-3">
        {% set description %}
          {% if post.date %}
            <time class="block my-2 text-sm uppercase" datetime="{{ post.date | htmlDateString }}">{{ post.date | readableDate }}</time>
          {% endif %}

          <p>{{ post.data.description }}</p>
        {% endset %}

        {% set postscript %}
          <div class="flex flex-wrap gap-2">
            {% for tag in post.data.tags | filterTagList %}
              {% set tagUrl %}/tags/{{ tag | slug }}/{% endset %}
              <a href="{{ tagUrl | url }}" class="post-tag">#{{ tag }}</a>
            {% endfor %}
          </div>
        {% endset %}

        {{ Card({
          description: description|safe,
          imageFilename: post.data.imageFilename,
          link: post.url,
          postscript: postscript|safe,
          title: post.data.title
        }) }}
      </li>
    {% endfor %}
  </ol>
</div>