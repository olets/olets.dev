---
layout: layouts/sidebar.njk
templateClass: tmpl-post
---

{% from "Image.njk" import Image %}
{% from "PostNav.njk" import PostNav %}
{% from "Prose.njk" import Prose %}

{% set nextPost = null %}
{% set previousPost = null %}

{% if collections.posts %}
  {% set nextPost = collections.posts | getNextCollectionItem(page) %}
  {% set previousPost = collections.posts | getPreviousCollectionItem(page) %}
{% endif %}

<div class="max-w-4xl space-y-14 w-full">
  <div class="space-y-8">
    <h1 class="heading-2">{{ title }}</h1>

    <div class="opacity-80">Posted <time datetime="{{ page.date | htmlDateString }}">{{ page.date | readableDate }}</time></div>

    {# {% if tags %}
      <div>
        <span class="font-bold">Tags:</span>

        <ul class="flex-wrap gap-2 inline-flex list-none pl-0">
          {% for tag in tags | sort | filterTagList %}
            <li>
              {% set tagUrl %}/tags/{{ tag | slug }}/{% endset %}

              <a href="{{ tagUrl | url }}" class="post-tag">{{ tag }}</a>
            </li>
          {% endfor %}
        </ul>
      </div>
    {% endif %} #}

    {% if original.source and original.url %}
      <p class="italic">A version of this post originally appeared on <a href="{{ original.url | url }}">{{ original.source }}</a></p>
    {% endif %}
  </div>

  {% if imageFilename %}
    <figure>
      {{ Image({
        filename: imageFilename,
        imgixConfig: {
          ar: "16:9",
          fit: "facearea",
          w: 1000
        }
      }) }}
      
      <figcaption class="mt-1 opacity-80 text-xs">
        {% if imageDetails.title %}{{ imageDetails.title }}.{% endif %}

        {% if imageDetails.author %}{{ imageDetails.author }}.{% endif %}
        
        {% if imageDetails.license and imageDetails.license.title %}
          {% if imageDetails.license.url %}
            <a href="{{ imageDetails.license.url | url }}">
          {%- endif -%}
          
          {{ imageDetails.license.title -}}

          {% if imageDetails.license.url -%}
            </a>
          {%- endif -%}
          .
        {% endif %}
        
        {% if imageDetails.url %}<a href="{{ imageDetails.url|url }}">Source</a>.{% endif %}
    </figure>
  {% endif %}

  {% set proseContent %}
    {{ content | safe }}
  {% endset %}

  <div>{{ Prose({ content: proseContent }) }}</div>

  {{ PostNav({
    nextPost: nextPost,
    previousPost: previousPost
  })}}
</div>